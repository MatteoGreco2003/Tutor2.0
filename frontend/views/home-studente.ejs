<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tutor 2.0</title>
    <link rel="stylesheet" href="css/home-studente.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
  </head>
  <body>
    <!-- Header -->
    <div class="header">
      <div class="header-left">
        <a
          href="/home-studenti"
          class="user-icon"
          style="text-decoration: none; color: inherit"
          >üë§</a
        >
        <a
          href="/home-studenti"
          class="header-title"
          style="text-decoration: none; color: inherit"
          >Nome e Cognome</a
        >
      </div>
      <button class="logout-btn">Disconnettiti</button>
    </div>

    <!-- Main Container -->
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <a href="/home-studenti" class="sidebar-item active" data-page="home"
          >üè† Home</a
        >
        <a href="/profilo-studente" class="sidebar-item">üë§ Profilo Studente</a>
        <a href="/subject" class="sidebar-item">üìë Materie</a>
        <a href="/avg-materie" class="sidebar-item">üìö Media Materie</a>
        <div class="sidebar-footer">
          <div class="sidebar-button">
            <button class="delete-btn">üóëÔ∏è Elimina profilo</button>
          </div>
          <div class="outro">
            <p>
              Powered by
              <a href="https://www.toptutor.it/" target="_blank">toptutor.it</a>
            </p>
          </div>
          <div class="sidebar-socials">
            <a href="https://www.instagram.com/toptutor.it/" target="_blank"
              ><i class="fab fa-instagram"></i
            ></a>
          </div>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Verifiche Section -->
        <div class="section">
          <div class="section-header">
            <h2 class="section-title">Storico verifiche</h2>
          </div>

          <div class="verifiche-list" id="verificheList">
            <div class="empty-state">
              <i class="fas fa-inbox"></i>
              <p>Nessuna verifica registrata</p>
            </div>
          </div>

          <button class="add-btn" id="addVerificaBtn">
            <i class="fas fa-plus"></i> Inserisci una verifica
          </button>
        </div>

        <!-- Calendario Section -->
        <div class="calendar-section">
          <div class="calendar-header">
            <h3 class="section-title">Calendario verifiche</h3>
            <div class="calendar-nav">
              <button id="prevMonthBtn" aria-label="Mese precedente">
                &lt;
              </button>
              <span id="currentMonth" class="current-month">NOVEMBRE 2025</span>
              <button id="nextMonthBtn" aria-label="Mese successivo">
                &gt;
              </button>
            </div>
          </div>

          <div class="calendar-wrapper">
            <table class="calendar" id="calendarTable">
              <!-- Generato da JavaScript -->
            </table>
          </div>
        </div>
      </main>
    </div>

    <!-- Modale Elimina Profilo (nascosta inizialmente) -->
    <div id="deleteProfileModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeDeleteProfile">&times;</span>
        <h2>Elimina profilo</h2>
        <p>
          Sei sicuro di eliminare il tuo profilo?<br />
          Una volta selezionato <b>Elimina comunque</b> non sarai pi√π in grado
          di recuperare il tuo storico verifiche e le tue informazioni.
        </p>
        <div style="display: flex; gap: 14px; margin-top: 20px">
          <button
            id="confirmDeleteProfile"
            class="delete-btn"
            style="margin: 0"
          >
            Elimina comunque
          </button>
          <button id="cancelDeleteProfile" class="btn-annulla">Annulla</button>
        </div>
      </div>
    </div>

    <!-- Modale Inserisci Verifica -->
    <div id="insertVerificaModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeInsertVerifica">&times;</span>
        <h2>Inserisci una verifica</h2>
        <form id="insertVerificaForm" novalidate>
          <div style="margin-bottom: 16px">
            <label for="verificaData">Giorno</label>
            <div style="display: flex; align-items: center; gap: 8px">
              <input
                type="text"
                id="verificaData"
                name="verificaData"
                required
                placeholder="Data Verifica"
                autocomplete="off"
                readonly
                style="flex: 1"
              />
            </div>
          </div>

          <div style="margin-bottom: 16px">
            <label for="materia">Materia</label>
            <select id="materia" name="materia" size="4" required></select>
          </div>

          <div style="margin-bottom: 16px">
            <label for="argomento"
              >Descrivi l'argomento (max 500 caratteri)</label
            >
            <textarea
              id="argomento"
              name="argomento"
              maxlength="500"
              placeholder="Argomento Verifica"
              rows="4"
            ></textarea>
          </div>

          <div style="margin-bottom: 12px">
            <label for="valutazione" style="font-size: 15px; font-weight: 500"
              >Valutazione</label
            >
            <div class="input-voto-flex">
              <input
                type="number"
                step="0.5"
                min="0"
                max="10"
                id="valutazione"
                name="valutazione"
                placeholder="Voto Verifica"
                class="input-voto"
                autocomplete="off"
              />
            </div>
            <div style="margin-top: 8px">
              <input type="checkbox" id="previsto" name="previsto" />
              <label for="previsto" style="font-size: 14px">
                Non ho ancora il voto
              </label>
            </div>
          </div>

          <div
            id="verificaError"
            class="error-msg"
            style="display: none; margin-bottom: 12px"
          ></div>

          <div style="display: flex; gap: 14px; margin-top: 20px">
            <button type="submit" class="plan-btn" style="margin: 0">
              Inserisci Verifica
            </button>
            <button type="button" class="btn-annulla" id="annullaVerifica">
              Annulla
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modale Modifica Verifica -->
    <div id="editVerificaModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeEditVerifica">&times;</span>
        <h2>Modifica verifica</h2>
        <p>
          Puoi modificare i dati della tua verifica.<br />
          Attenzione: se la verifica ha gi√† un voto non puoi impostare "Non ho
          ancora il voto".
        </p>
        <form id="editVerificaForm" novalidate>
          <div style="margin-bottom: 16px">
            <label for="editVerificaData">Giorno</label>
            <div style="display: flex; align-items: center; gap: 8px">
              <input
                type="text"
                id="editVerificaData"
                name="editVerificaData"
                required
                placeholder="Data Verifica"
                autocomplete="off"
                readonly
                style="flex: 1"
              />
            </div>
          </div>

          <div style="margin-bottom: 16px">
            <label for="editMateria">Materia</label>
            <select
              id="editMateria"
              name="editMateria"
              size="4"
              required
            ></select>
          </div>

          <div style="margin-bottom: 16px">
            <label for="editArgomento"
              >Descrivi l'argomento (max 500 caratteri)</label
            >
            <textarea
              id="editArgomento"
              name="editArgomento"
              maxlength="500"
              placeholder="Argomento Verifica"
              rows="4"
            ></textarea>
          </div>

          <div style="margin-bottom: 12px">
            <label
              for="editValutazione"
              style="font-size: 15px; font-weight: 500"
              >Valutazione</label
            >
            <div class="input-voto-flex">
              <input
                type="number"
                step="0.5"
                min="0"
                max="10"
                id="editValutazione"
                name="editValutazione"
                placeholder="Voto Verifica"
                class="input-voto"
                autocomplete="off"
              />
            </div>
            <div style="margin-top: 8px">
              <input type="checkbox" id="editPrevisto" name="editPrevisto" />
              <label for="editPrevisto" style="font-size: 14px">
                Non ho ancora il voto
              </label>
            </div>
          </div>

          <div
            id="editVerificaError"
            class="error-msg"
            style="display: none; margin-bottom: 12px"
          ></div>

          <div style="display: flex; gap: 14px; margin-top: 20px">
            <button type="submit" class="plan-btn" style="margin: 0">
              Modifica Verifica
            </button>
            <button type="button" class="btn-annulla" id="annullaEditVerifica">
              Annulla
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Modale Elimina Verifica -->
    <div id="deleteVerificaModal" class="modal">
      <div class="modal-content">
        <span class="close" id="closeDeleteVerifica">&times;</span>
        <h2>Elimina verifica</h2>

        <p>
          Sei sicuro di voler eliminare questa verifica?<br />Una volta
          selezionato <b>Elimina verifica</b> non potrai pi√π recuperare i suoi
          dati.
        </p>
        <div style="display: flex; gap: 14px; margin-top: 20px">
          <button
            id="confirmDeleteVerifica"
            class="delete-btn"
            style="margin: 0"
          >
            Elimina verifica
          </button>
          <button id="cancelDeleteVerifica" class="btn-annulla">Annulla</button>
        </div>
      </div>
    </div>

    <!-- MODAL: Verifiche del giorno -->
    <div id="dayVerificheModal" class="modal">
      <div class="modal-content day-verifiche-modal">
        <!-- Header con titolo e close -->
        <div class="modal-header">
          <h2 id="dayVerificheTitle">Verifiche del giorno</h2>
          <button id="closeDayVerifiche" class="close-btn">‚úï</button>
        </div>

        <!-- Lista verifiche -->
        <div class="day-verifiche-list" id="dayVerificheList">
          <!-- Populate dinamicamente -->
        </div>

        <!-- Footer con bottone Chiudi -->
        <div class="modal-footer">
          <button id="closeDayVerificheBtn" class="btn-annulla">Chiudi</button>
        </div>
      </div>
    </div>
  </body>

  <script src="/js/api.js"></script>
  <!--? serve per mandare il jwt -->
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/it.js"></script>

  <script src="/js/home-studente.js"></script>
  <script src="/js/calendario.js"></script>
</html>
